<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    height: 100vh;
    color: #fff;
    background: linear-gradient(135deg, #000, #0a2a88, #333, #ccc);
    background-size: 400% 400%;
    animation: gradientMove 12s ease infinite;
  }

  @keyframes gradientMove {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }

  .container {
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    width: 90%;
    max-width: 600px;
    margin: auto;
    padding: 40px;
    text-align: center;
    animation: fadeIn 1s ease forwards;
  }

  h1, h2, h3, p {
    margin: 10px 0;
  }

  button {
    background: rgba(0, 140, 255, 0.15);
    color: #fff;
    border: 1px solid #00aaff;
    border-radius: 10px;
    padding: 12px 25px;
    font-size: 1.1em;
    margin: 10px;
    cursor: pointer;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
  }

  button:hover {
    background: rgba(0, 140, 255, 0.3);
    box-shadow: 0 0 15px #00aaff, 0 0 25px #0077ff inset;
    transform: scale(1.05);
  }

  .hidden { display: none; }

  .particles {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    background: radial-gradient(circle, #fff, transparent);
    border-radius: 50%;
    opacity: 0.8;
    animation: float 10s linear infinite;
  }

  @keyframes float {
    from { transform: translateY(100vh) scale(0.5); opacity: 0.8; }
    to { transform: translateY(-10vh) scale(1.2); opacity: 0; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }

  .progress {
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    height: 12px;
    margin: 15px 0;
    overflow: hidden;
  }

  .progress-fill {
    background: linear-gradient(90deg, #00aaff, #00ffcc);
    width: 0%;
    height: 100%;
    border-radius: 20px;
    transition: width 0.5s ease;
  }

  .music-controls {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0,0,0,0.5);
    padding: 10px 15px;
    border-radius: 15px;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 10px #00aaff;
    z-index: 3;
  }

  .music-controls button {
    font-size: 1em;
    padding: 8px 15px;
    margin: 0 5px;
  }

  .transition-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,30,0.85);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8em;
    z-index: 10;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
  }

  .transition-screen.active {
    opacity: 1;
    pointer-events: all;
  }
</style>
</head>
<body>

<div class="particles" id="particles"></div>

<div class="container" id="start-screen">
  <h1>Quiz</h1>
  <button onclick="startGame()">ComeÃ§ar</button>
</div>

<div class="container hidden" id="theme-screen">
  <h2>Escolha um tema inicial</h2>
  <button onclick="selectTheme('Rito')">Rito</button>
  <button onclick="selectTheme('SÃ­mbolo')">SÃ­mbolo</button>
  <button onclick="selectTheme('Mito')">Mito</button>
</div>

<div class="container hidden" id="quiz">
  <h2 id="theme">Tema</h2>
  <p id="question">Pergunta</p>
  <div id="answers"></div>
  <div class="progress"><div class="progress-fill" id="progressFill"></div></div>
  <p id="progress"></p>
  <button id="nextBtn" class="hidden">PrÃ³xima</button>
</div>

<div class="music-controls">
  <button onclick="toggleMusic()">ðŸŽµ</button>
  <input type="range" id="volume" min="0" max="1" step="0.05" value="0.3" onchange="setVolume(this.value)">
</div>

<div class="transition-screen" id="transition">
  âœ¨ Mudando para o prÃ³ximo tema...
</div>

<audio id="bgMusic" loop autoplay>
  <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/lofi_study/Chillhop_Beats_-_Calm_Vibes.mp3" type="audio/mpeg">
</audio>
<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>

<script>
/* === Fundo de partÃ­culas === */
const particleContainer = document.getElementById('particles');
for (let i = 0; i < 60; i++) {
  const particle = document.createElement('div');
  particle.classList.add('particle');
  const size = Math.random() * 6 + 2;
  particle.style.width = size + 'px';
  particle.style.height = size + 'px';
  particle.style.left = Math.random() * 100 + 'vw';
  particle.style.animationDuration = 8 + Math.random() * 6 + 's';
  particleContainer.appendChild(particle);
}

/* === Dados === */
const quizData = {
  "Rito": [
    { q: "O que Ã© um rito?", a: ["Uma prÃ¡tica simbÃ³lica repetida", "Um ser espiritual", "Um lugar sagrado", "Uma histÃ³ria mÃ­stica"], correct: 0 },
    { q: "Os ritos geralmente expressam:", a: ["A cultura e fÃ© de um grupo", "Somente diversÃ£o", "Fatos cientÃ­ficos", "Curiosidades histÃ³ricas"], correct: 0 },
  ],
  "SÃ­mbolo": [
    { q: "O que Ã© um sÃ­mbolo?", a: ["RepresentaÃ§Ã£o de uma ideia", "Um objeto comum", "Um som qualquer", "Um tipo de rito"], correct: 0 },
    { q: "SÃ­mbolos sÃ£o usados para:", a: ["Transmitir significados", "Comer", "Dormir", "Escrever"], correct: 0 },
  ],
  "Mito": [
    { q: "O que Ã© um mito?", a: ["Uma narrativa simbÃ³lica", "Um fato cientÃ­fico", "Uma lei polÃ­tica", "Uma invenÃ§Ã£o moderna"], correct: 0 },
    { q: "Mitos explicam:", a: ["A origem e o sentido das coisas", "A economia", "A tecnologia", "A matemÃ¡tica"], correct: 0 },
  ]
};

let themesOrder = [];
let currentThemeIndex = 0;
let theme = "";
let questionIndex = 0;
let score = 0;
let totalScore = 0;

const startScreen = document.getElementById('start-screen');
const themeScreen = document.getElementById('theme-screen');
const quiz = document.getElementById('quiz');
const themeEl = document.getElementById('theme');
const questionEl = document.getElementById('question');
const answersEl = document.getElementById('answers');
const progressEl = document.getElementById('progress');
const nextBtn = document.getElementById('nextBtn');
const progressFill = document.getElementById('progressFill');
const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');
const clickSound = document.getElementById('clickSound');
const bgMusic = document.getElementById('bgMusic');
const transition = document.getElementById('transition');

function startGame() {
  clickSound.play();
  startScreen.classList.add('hidden');
  themeScreen.classList.remove('hidden');
}

function selectTheme(selected) {
  clickSound.play();
  const order = ["Rito", "SÃ­mbolo", "Mito"];
  const startIndex = order.indexOf(selected);
  themesOrder = [...order.slice(startIndex), ...order.slice(0, startIndex)];

  currentThemeIndex = 0;
  totalScore = 0;
  themeScreen.classList.add('hidden');
  quiz.classList.remove('hidden');
  startTheme();
}

function startTheme() {
  theme = themesOrder[currentThemeIndex];
  questionIndex = 0;
  score = 0;
  loadQuestion();
}

function loadQuestion() {
  const current = quizData[theme][questionIndex];
  themeEl.textContent = theme;
  questionEl.textContent = current.q;
  answersEl.innerHTML = '';
  progressEl.textContent = `Pergunta ${questionIndex + 1} de ${quizData[theme].length}`;
  current.a.forEach((answer, i) => {
    const btn = document.createElement('button');
    btn.textContent = answer;
    btn.onclick = () => checkAnswer(i);
    answersEl.appendChild(btn);
  });
  progressFill.style.width = ((questionIndex / quizData[theme].length) * 100) + '%';
  nextBtn.classList.add('hidden');
}

function checkAnswer(selected) {
  const current = quizData[theme][questionIndex];
  const buttons = answersEl.querySelectorAll('button');
  buttons.forEach((btn, i) => {
    btn.disabled = true;
    if (i === current.correct) btn.style.background = '#00ff99';
    if (i === selected && i !== current.correct) btn.style.background = '#ff4444';
  });
  if (selected === current.correct) { score++; correctSound.play(); }
  else { wrongSound.play(); }
  nextBtn.classList.remove('hidden');
}

nextBtn.addEventListener('click', () => {
  clickSound.play();
  questionIndex++;
  if (questionIndex < quizData[theme].length) loadQuestion();
  else finishTheme();
});

function finishTheme() {
  totalScore += score;
  currentThemeIndex++;
  if (currentThemeIndex < themesOrder.length) {
    showTransition(() => {
      startTheme();
    });
  } else {
    quiz.innerHTML = `<h1>ðŸŽ‰ VocÃª completou todo o Quiz!</h1><p>PontuaÃ§Ã£o total: ${totalScore} de ${Object.values(quizData).flat().length}.</p><p>ParabÃ©ns por concluir todos os temas! ðŸŒŸ</p><button onclick="backToStart()">Jogar novamente</button>`;
  }
}

function showTransition(callback) {
  transition.classList.add('active');
  transition.innerHTML = `âœ¨ Mudando para o prÃ³ximo tema: <b>${themesOrder[currentThemeIndex]}</b>...`;
  setTimeout(() => {
    transition.classList.remove('active');
    callback();
  }, 3000);
}

function backToStart() {
  clickSound.play();
  quiz.classList.add('hidden');
  startScreen.classList.remove('hidden');
}

/* === MÃºsica === */
function toggleMusic() {
  if (bgMusic.paused) bgMusic.play();
  else bgMusic.pause();
}
function setVolume(v) {
  bgMusic.volume = v;
}
</script>
</body>
</html>
